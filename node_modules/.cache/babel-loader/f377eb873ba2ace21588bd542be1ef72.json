{"ast":null,"code":"import _regeneratorRuntime from \"/Users/j.lin/prime/tier3/art-galore-solo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\n\nvar _marked = /*#__PURE__*/_regeneratorRuntime.mark(artworkSaga),\n    _marked2 = /*#__PURE__*/_regeneratorRuntime.mark(fetchArtwork),\n    _marked3 = /*#__PURE__*/_regeneratorRuntime.mark(fetchArtworkDetails),\n    _marked4 = /*#__PURE__*/_regeneratorRuntime.mark(addArtwork),\n    _marked5 = /*#__PURE__*/_regeneratorRuntime.mark(editArtwork),\n    _marked6 = /*#__PURE__*/_regeneratorRuntime.mark(deleteArtwork),\n    _marked7 = /*#__PURE__*/_regeneratorRuntime.mark(addLike),\n    _marked8 = /*#__PURE__*/_regeneratorRuntime.mark(fetchLikes);\n\nimport axios from 'axios';\nimport { put, takeLatest } from 'redux-saga/effects';\n\nfunction artworkSaga() {\n  return _regeneratorRuntime.wrap(function artworkSaga$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.next = 2;\n          return takeLatest('ADD_ARTWORK', addArtwork);\n\n        case 2:\n          _context.next = 4;\n          return takeLatest('FETCH_ARTWORK', fetchArtwork);\n\n        case 4:\n          _context.next = 6;\n          return takeLatest('FETCH_DETAIL', fetchArtworkDetails);\n\n        case 6:\n          _context.next = 8;\n          return takeLatest('EDIT_ARTWORK', editArtwork);\n\n        case 8:\n          _context.next = 10;\n          return takeLatest('DELETE_ARTWORK', deleteArtwork);\n\n        case 10:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, _marked);\n} //how to use a global flag??\n\n\nvar DEBUG = true; //   Get all artwork from database\n\nfunction fetchArtwork(action) {\n  var _artwork;\n\n  return _regeneratorRuntime.wrap(function fetchArtwork$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          _context2.prev = 0;\n          _context2.next = 3;\n          return axios.get('/api/artwork');\n\n        case 3:\n          _artwork = _context2.sent;\n          console.log('GET_ARTWORK', _artwork.data);\n          _context2.next = 7;\n          return put({\n            type: 'SET_ARTWORK',\n            payload: _artwork.data\n          });\n\n        case 7:\n          _context2.next = 12;\n          break;\n\n        case 9:\n          _context2.prev = 9;\n          _context2.t0 = _context2[\"catch\"](0);\n          console.log('get detail error', _context2.t0);\n\n        case 12:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  }, _marked2, null, [[0, 9]]);\n} // Get artwork detail from database\n\n\nfunction fetchArtworkDetails(action) {\n  var details;\n  return _regeneratorRuntime.wrap(function fetchArtworkDetails$(_context3) {\n    while (1) {\n      switch (_context3.prev = _context3.next) {\n        case 0:\n          _context3.prev = 0;\n          _context3.next = 3;\n          return axios.get(\"/api/artwork/\".concat(action.payload.id));\n\n        case 3:\n          details = _context3.sent;\n          console.log('GET ARTWORK details', details.data);\n          _context3.next = 7;\n          return put({\n            type: 'SET_DETAILS',\n            payload: details.data\n          });\n\n        case 7:\n          _context3.next = 12;\n          break;\n\n        case 9:\n          _context3.prev = 9;\n          _context3.t0 = _context3[\"catch\"](0);\n          console.log('get detail error', _context3.t0);\n\n        case 12:\n        case \"end\":\n          return _context3.stop();\n      }\n    }\n  }, _marked3, null, [[0, 9]]);\n} // worker Saga: will be fired on \"ADD_ARTWORK\" actions\n// Post new artwork to database\n\n\nfunction addArtwork(action) {\n  var data, response;\n  return _regeneratorRuntime.wrap(function addArtwork$(_context4) {\n    while (1) {\n      switch (_context4.prev = _context4.next) {\n        case 0:\n          data = action.payload;\n\n          if (DEBUG) {\n            console.log('start of addArtwork, data=', data);\n          }\n\n          _context4.prev = 2;\n          _context4.next = 5;\n          return axios.post('/api/artwork', data);\n\n        case 5:\n          response = _context4.sent;\n          _context4.next = 11;\n          break;\n\n        case 8:\n          _context4.prev = 8;\n          _context4.t0 = _context4[\"catch\"](2);\n          console.log('Category get request failed', _context4.t0);\n\n        case 11:\n        case \"end\":\n          return _context4.stop();\n      }\n    }\n  }, _marked4, null, [[2, 8]]);\n}\n\nfunction editArtwork(action) {\n  return _regeneratorRuntime.wrap(function editArtwork$(_context5) {\n    while (1) {\n      switch (_context5.prev = _context5.next) {\n        case 0:\n          _context5.prev = 0;\n          _context5.next = 3;\n          return axios.put('/api/artwork/', action.payload);\n\n        case 3:\n          _context5.next = 5;\n          return put({\n            type: 'FETCH_DETAIL',\n            payload: artwork.id\n          });\n\n        case 5:\n          _context5.next = 10;\n          break;\n\n        case 7:\n          _context5.prev = 7;\n          _context5.t0 = _context5[\"catch\"](0);\n          console.log(' SAGA ERROR PUT', err);\n\n        case 10:\n        case \"end\":\n          return _context5.stop();\n      }\n    }\n  }, _marked5, null, [[0, 7]]);\n}\n\nfunction deleteArtwork(action) {\n  return _regeneratorRuntime.wrap(function deleteArtwork$(_context6) {\n    while (1) {\n      switch (_context6.prev = _context6.next) {\n        case 0:\n          _context6.prev = 0;\n          _context6.next = 3;\n          return axios.delete(\"/api/artwork/\".concat(action.payload));\n\n        case 3:\n          _context6.next = 5;\n          return put({\n            type: 'FETCH_ARTWORK'\n          });\n\n        case 5:\n          _context6.next = 10;\n          break;\n\n        case 7:\n          _context6.prev = 7;\n          _context6.t0 = _context6[\"catch\"](0);\n          alert('error deleting item');\n\n        case 10:\n        case \"end\":\n          return _context6.stop();\n      }\n    }\n  }, _marked6, null, [[0, 7]]);\n}\n\nfunction addLike(action) {\n  return _regeneratorRuntime.wrap(function addLike$(_context7) {\n    while (1) {\n      switch (_context7.prev = _context7.next) {\n        case 0:\n          console.log('in addLike', action.payload); // post favorite to database\n\n          _context7.prev = 1;\n          _context7.next = 4;\n          return axios.post(\"/api/likes/\", action.payload);\n\n        case 4:\n          _context7.next = 6;\n          return put({\n            // put is dispatching the information to be grabbed by whoever.\n            type: 'FETCH_LIKES' // this is being caught by RootSaga which is then being sent to function fetchFavorites()\n\n          });\n\n        case 6:\n          _context7.next = 11;\n          break;\n\n        case 8:\n          _context7.prev = 8;\n          _context7.t0 = _context7[\"catch\"](1);\n          console.log('Error in LIKES post', _context7.t0);\n\n        case 11:\n        case \"end\":\n          return _context7.stop();\n      }\n    }\n  }, _marked7, null, [[1, 8]]);\n} // end addFavorite\n\n\nfunction fetchLikes() {\n  var response;\n  return _regeneratorRuntime.wrap(function fetchLikes$(_context8) {\n    while (1) {\n      switch (_context8.prev = _context8.next) {\n        case 0:\n          _context8.prev = 0;\n          _context8.next = 3;\n          return axios.get('/api/likes');\n\n        case 3:\n          response = _context8.sent;\n          _context8.next = 6;\n          return put({\n            type: 'SET_LIKES',\n            payload: response.data\n          });\n\n        case 6:\n          _context8.next = 11;\n          break;\n\n        case 8:\n          _context8.prev = 8;\n          _context8.t0 = _context8[\"catch\"](0);\n          console.log('fetch error', _context8.t0);\n\n        case 11:\n        case \"end\":\n          return _context8.stop();\n      }\n    }\n  }, _marked8, null, [[0, 8]]);\n} // end fetchFavorites\n\n\nexport default artworkSaga;","map":{"version":3,"sources":["/Users/j.lin/prime/tier3/art-galore-solo/src/redux/sagas/artwork.saga.js"],"names":["artworkSaga","fetchArtwork","fetchArtworkDetails","addArtwork","editArtwork","deleteArtwork","addLike","fetchLikes","axios","put","takeLatest","DEBUG","action","get","artwork","console","log","data","type","payload","id","details","post","response","err","delete","alert"],"mappings":"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","sourcesContent":["import axios from 'axios';\nimport { put, takeLatest } from 'redux-saga/effects';\n\nfunction* artworkSaga() {\n  yield takeLatest('ADD_ARTWORK', addArtwork);\n  yield takeLatest('FETCH_ARTWORK', fetchArtwork);\n  yield takeLatest('FETCH_DETAIL', fetchArtworkDetails);\n  yield takeLatest('EDIT_ARTWORK', editArtwork);\n  yield takeLatest('DELETE_ARTWORK', deleteArtwork);\n}\n//how to use a global flag??\nconst DEBUG=true;\n\n//   Get all artwork from database\nfunction* fetchArtwork(action){\n  try{\n    const artwork = yield axios.get('/api/artwork');\n    console.log('GET_ARTWORK', artwork.data);\n    yield put({\n      type: 'SET_ARTWORK',\n      payload: artwork.data,\n    });\n  } catch(err) {\n    console.log('get detail error', err);\n  }\n}\n\n// Get artwork detail from database\nfunction* fetchArtworkDetails(action){\n  try{\n    const details = yield axios.get(`/api/artwork/${action.payload.id}`);\n    console.log('GET ARTWORK details', details.data);\n    yield put({\n      type: 'SET_DETAILS',\n      payload: details.data,\n    });\n  } catch(err) {\n    console.log('get detail error', err);\n  }\n}\n// worker Saga: will be fired on \"ADD_ARTWORK\" actions\n\n// Post new artwork to database\nfunction* addArtwork(action) {\n\n    let data = action.payload;\n\n    if (DEBUG) {\n        console.log('start of addArtwork, data=', data);\n    }\n\n    try {\n      // need for credentials ???\n      const response = \n      yield axios.post('/api/artwork', data);\n\n      // if (DEBUG)\n      // {\n      //     console.log('response is:', response);\n      //     console.log('response status is:', response.status);\n      //     console.log('response data is:', response.data);\n      // }\n\n\n      // //need to set up message to let use know the status of adding artwork\n      // //if (response.data === 'OK')\n      // if (response.status === 200)\n      // {\n      //   yield put({ type: 'SET_ACTION_MSG', payload: 'The artwork has been successfully added'});\n      // }\n      // else\n      // {\n      //   yield put({ type: 'SET_ACTION_MSG', payload: 'Failed adding the artwork. Please try again.' });\n      // }\n\n    } catch (error) {\n      console.log('Category get request failed', error);\n    }\n}\n\nfunction* editArtwork(action) {\n  try {\n    yield axios.put('/api/artwork/', action.payload);\n    yield put({\n      type:'FETCH_DETAIL',\n      payload: artwork.id\n      })\n  } catch (error) {\n    console.log(' SAGA ERROR PUT', err);\n  }\n}\n\nfunction* deleteArtwork(action) {\n  try{\n    yield axios.delete(`/api/artwork/${action.payload}`);\n    yield put ({\n      type: 'FETCH_ARTWORK'\n    });\n  } catch (error) {\n    alert('error deleting item')\n  }\n}\n\nfunction* addLike(action) {\n  console.log('in addLike', action.payload);\n\n  // post favorite to database\n  try {\n    yield axios.post(`/api/likes/`, action.payload); // this is the url from the user clicking the fav button.\n\n    // update favoriteReducer\n    yield put({\n      // put is dispatching the information to be grabbed by whoever.\n      type: 'FETCH_LIKES', // this is being caught by RootSaga which is then being sent to function fetchFavorites()\n    });\n  } catch (err) {\n    console.log('Error in LIKES post', err);\n  }\n} // end addFavorite\n\nfunction* fetchLikes() {\n  try {\n    let response = yield axios.get('/api/likes');\n    yield put({\n      type: 'SET_LIKES',\n      payload: response.data,\n    });\n  } catch (err) {\n    console.log('fetch error', err);\n  }\n} // end fetchFavorites\n\n\nexport default artworkSaga;\n"]},"metadata":{},"sourceType":"module"}